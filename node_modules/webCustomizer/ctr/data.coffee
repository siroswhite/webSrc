#==============================================================================
# require
#==============================================================================
core = require("core")
data = require("../data")
ctr_css = require("./css")

#==============================================================================
# event
#==============================================================================
#----------------------------------------------------------------------------
# pageSave
#----------------------------------------------------------------------------
$("#page_save").click (event) =>
  data.setCookie()
  alert("ページストレージに保存しました。")

#----------------------------------------------------------------------------
# pageClear
#----------------------------------------------------------------------------
$("#page_clear").click (event) =>
  data.clearCookie()
  location.reload()

#----------------------------------------------------------------------------
# g Save
#----------------------------------------------------------------------------
$("#global_save").click (event) =>
  data.setCookie_G()
  alert("グローバルストレージに保存しました。")

#----------------------------------------------------------------------------
# g Clear
#----------------------------------------------------------------------------
$("#global_clear").click (event) =>
  data.clearCookie_G()
  location.reload()
  
#----------------------------------------------------------------------------
# Generate
#----------------------------------------------------------------------------
$("#generateCodes").click (event) =>
   console.log(ctr_css.generateCodes())
   alert("コンソールにコードを出力しました。")

#----------------------------------------------------------------------------
# save as file
#----------------------------------------------------------------------------
$("#saveAsFile").click (event) =>
   data.saveAsFile()

#----------------------------------------------------------------------------
# save as file
#----------------------------------------------------------------------------
$("#loadFromFile").click (event) =>
   $("#loader").click()

#----------------------------------------------------------------------------
# loadFromFile
#----------------------------------------------------------------------------
loadFromFile = (e, parent) ->
  JsonObj = JSON.parse(e.target.result)
  data.webele = JsonObj.webele
  data.HSL = JsonObj.HSL
  data.optionData    = JsonObj.optionData
  data.responsiveMax = JsonObj.responsiveMax
  ctr_css.init()

core.file.registFileAPI("#loader", loadFromFile, this)

#==============================================================================
# require
#==============================================================================
core = require("core")
data = require("../data")
ctr_css = require("./css")
ctr_option = require("./option")
ctr_colorScheme = require('./colorScheme')
#==============================================================================
# event
#==============================================================================
#----------------------------------------------------------------------------
# pageSave
#----------------------------------------------------------------------------
$("#page_save").click (event) =>
  data.setCookie()
  alert("ページストレージに保存しました。")

#----------------------------------------------------------------------------
# pageClear
#----------------------------------------------------------------------------
$("#page_clear").click (event) =>
  data.clearCookie()
  location.reload()

#----------------------------------------------------------------------------
# g Save
#----------------------------------------------------------------------------
$("#global_save").click (event) =>
  data.setCookie_G()
  alert("グローバルストレージに保存しました。")

#----------------------------------------------------------------------------
# g Clear
#----------------------------------------------------------------------------
$("#global_clear").click (event) =>
  data.clearCookie_G()
  location.reload()
  
#----------------------------------------------------------------------------
# Generate
#----------------------------------------------------------------------------
$("#generateCodes").click (event) =>
   console.log(ctr_css.generateStylus())
   console.log(ctr_option.generateCode())
   alert("コンソールにコードを出力しました。")

#----------------------------------------------------------------------------
# save as file
#----------------------------------------------------------------------------
$("#saveAsFile").click (event) =>
   data.saveAsFile()

#----------------------------------------------------------------------------
# loadFromFile
#----------------------------------------------------------------------------
loadFromFile = (e, parent) ->
  JsonObj = JSON.parse(e.target.result)
  data.data = JsonObj.data
  data.HSL = JsonObj.HSL
  ctr_css.init()
  ctr_colorScheme.init()
core.file.registFileAPI("#loadFromFile", loadFromFile, this)
